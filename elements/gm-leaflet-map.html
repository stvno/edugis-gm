<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/leaflet/dist/leaflet.js"></script>
<link rel="stylesheet" href="../bower_components/leaflet/dist/leaflet.css">

<dom-module id="gm-leaflet-map">
<style>
:host #mapdiv {
height: 100%;
}
 
</style>
<template>
<div id="mapdiv"></div>
</template>
<script>
Polymer({
	is: 'gm-leaflet-map',
	properties: {
		map: Object
	},
	ready: function() {
		this.map = new L.map('mapdiv').setView([52, 5],12);
		//TODO: read from config
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{
		attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(this.map);
		
	},
	attached: function() {
	var self = this;
	//UGLY HACK, but apparently the only way to make sure that the element has a size
	window.setTimeout(	function(){self.map.invalidateSize(true)},1);
	}
})
</script>
</dom-module>
